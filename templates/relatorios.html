{% extends "layout.html" %}

{% block title %}Relatórios - Sistema PDV{% endblock %}

{% block main_content %}
<div class="page-container">
    <div class="page-header">
        <h1>Relatórios</h1>
    </div>
    
    <div class="tabs">
        <button class="tab-btn active" onclick="showTab('sales')">Vendas</button>
        <button class="tab-btn" onclick="showTab('cash')">Caixa</button>
        <button class="tab-btn" onclick="showTab('products')">Produtos</button>
    </div>
    
    <div id="sales-tab" class="tab-content active">
        <div class="report-filters">
            <div class="filter-group">
                <label>Data Início</label>
                <input type="date" id="sales-start-date">
            </div>
            <div class="filter-group">
                <label>Data Fim</label>
                <input type="date" id="sales-end-date">
            </div>
            <button onclick="generateSalesReport()" class="btn btn-primary">Gerar Relatório</button>
            <button onclick="exportSalesReport()" class="btn btn-success">Exportar CSV</button>
            <button onclick="printSalesReport()" class="btn btn-secondary">Imprimir</button>
        </div>
        
        <div class="report-summary">
            <div class="summary-item">
                <span>Total de Vendas:</span>
                <strong id="sales-count">0</strong>
            </div>
            <div class="summary-item">
                <span>Valor Total:</span>
                <strong id="sales-total">R$ 0,00</strong>
            </div>
            <div class="summary-item">
                <span>Ticket Médio:</span>
                <strong id="sales-average">R$ 0,00</strong>
            </div>
        </div>
        
        <table class="data-table">
            <thead>
                <tr>
                    <th>Data</th>
                    <th>ID</th>
                    <th>Cliente</th>
                    <th>Vendedor</th>
                    <th>Itens</th>
                    <th>Total</th>
                    <th>Pagamento</th>
                </tr>
            </thead>
            <tbody id="sales-report-table"></tbody>
        </table>
    </div>
    
    <div id="cash-tab" class="tab-content">
        <div class="report-filters">
            <div class="filter-group">
                <label>Data Início</label>
                <input type="date" id="cash-start-date">
            </div>
            <div class="filter-group">
                <label>Data Fim</label>
                <input type="date" id="cash-end-date">
            </div>
            <button onclick="generateCashReport()" class="btn btn-primary">Gerar Relatório</button>
            <button onclick="printCashReport()" class="btn btn-secondary">Imprimir</button>
        </div>
        
        <div class="report-summary">
            <div class="summary-item success">
                <span>Entradas:</span>
                <strong id="cash-entries">R$ 0,00</strong>
            </div>
            <div class="summary-item danger">
                <span>Saídas:</span>
                <strong id="cash-exits">R$ 0,00</strong>
            </div>
            <div class="summary-item">
                <span>Saldo:</span>
                <strong id="cash-balance-report">R$ 0,00</strong>
            </div>
        </div>
        
        <table class="data-table">
            <thead>
                <tr>
                    <th>Data</th>
                    <th>Tipo</th>
                    <th>Categoria</th>
                    <th>Descrição</th>
                    <th>Valor</th>
                </tr>
            </thead>
            <tbody id="cash-report-table"></tbody>
        </table>
    </div>
    
    <div id="products-tab" class="tab-content">
        <div class="report-filters">
            <button onclick="generateProductsReport()" class="btn btn-primary">Gerar Relatório</button>
            <button onclick="printProductsReport()" class="btn btn-secondary">Imprimir</button>
        </div>
        
        <div class="report-summary">
            <div class="summary-item">
                <span>Total de Produtos:</span>
                <strong id="products-count">0</strong>
            </div>
            <div class="summary-item">
                <span>Valor em Estoque:</span>
                <strong id="stock-value">R$ 0,00</strong>
            </div>
            <div class="summary-item danger">
                <span>Estoque Baixo:</span>
                <strong id="low-stock-count">0</strong>
            </div>
        </div>
        
        <table class="data-table">
            <thead>
                <tr>
                    <th>Código</th>
                    <th>Nome</th>
                    <th>Categoria</th>
                    <th>Estoque</th>
                    <th>Custo Unit.</th>
                    <th>Preço Venda</th>
                    <th>Valor Total</th>
                </tr>
            </thead>
            <tbody id="products-report-table"></tbody>
        </table>
    </div>
</div>

<script src="{{ url_for('static', filename='js/relatorios.js') }}"></script>
{% endblock %}
